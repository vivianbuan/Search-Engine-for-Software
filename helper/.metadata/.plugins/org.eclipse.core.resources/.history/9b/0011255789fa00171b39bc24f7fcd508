import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;

import org.json.simple.JSONObject;

public class FormulaToDocument {

	public static void main(String[] args) {
		
		File currentDir;
		String line = null;
		
		try {
			// get data directory
			currentDir = new File("").getCanonicalFile();
			File parentDir = currentDir.getParentFile().getParentFile();
			File formulaDir = new File(parentDir, "data/homebrew_formula");
			
			File outputFile = new File(formulaDir, "data/brew_formula.json");
			FileWriter fileWriter = new FileWriter(outputFile);
            BufferedWriter bufferedWriter = new BufferedWriter(fileWriter);
			
			// read data from doc
			File curFile = new File(formulaDir, "aircrack-ng.rb");
			FileReader fr = new FileReader(curFile);
			BufferedReader bufferedReader = new BufferedReader(fr);
			JSONObject jsonObject = new JSONObject();
			// start from second line, read until "bottle do"
			bufferedReader.readLine();
			while((line = bufferedReader.readLine()) != null) {
				line = line.trim();
				if (line.equals("bottle do")) break;
				// process none-empty, non-comment line
				if (line.isEmpty() || line.startsWith("#")) continue;
				String[] tmp = line.split(" ", 2);
				jsonObject.put(tmp[0], tmp[1]);
			}
			
			

            // Always close files.
            bufferedReader.close();  
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

}
